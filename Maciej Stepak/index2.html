<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <div id="filmy">
        <!-- Linki będą dynamicznie generowane tutaj -->
    </div>

    <p id="wynik"></p>

    <script>
        const apiUrl = "https://swapi.dev/api/people/1/";

        async function fetchSwapi() {
            try {
                const response = await fetch(apiUrl);
                const user = await response.json();
                console.log(user);
                const filmLinks = user.films;
                const filmPromises = filmLinks.map(async (link) => {    
                    const filmResponse = await fetch(link);
                    const filmData = await filmResponse.json();
                    return {
                        title: filmData.title,
                        url: link
                    }; 
                }); 
                const filmDetails = await Promise.all(filmPromises);
                const filmyDiv = document.getElementById('filmy');
                filmDetails.forEach(film => {
                    const filmLink = document.createElement('a');
                    filmLink.href = film.url;  
                    filmLink.textContent = film.title;  
                    filmLink.target = "_blank";  
                    const lineBreak = document.createElement('br');  
                    filmyDiv.appendChild(filmLink);
                    filmyDiv.appendChild(lineBreak);  
                });
            } catch (error) {
                console.error('Błąd', error);
            }
        }

      
        fetchSwapi();
    </script>
</body>
</html>